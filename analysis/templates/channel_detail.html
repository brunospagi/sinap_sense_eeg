<!-- templates/channel_detail.html -->
{% extends 'base.html' %} {% block content %}
<div class="card">
  <div class="card-header">
    <h3>Análise Detalhada: {{ analysis.channel_name }}</h3>
    <a
      href="{% url 'analysis:dashboard' analysis.eeg_data.id %}"
      class="btn btn-secondary"
    >
      Voltar
    </a>
  </div>
  <div class="card-body">
    <div class="mb-4">{{ plot_div|safe }}</div>
  </div>
  <br />
  <br />
  <br />
  <br />
  <br />
  <br />
  <br />
  <br />
  <br />
  <br />
  <br />
  <br />
  <br />
  <br />
  <br />
  <br />
  <br />
  <br />
  <br />
  <br />
  <br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<div class="card-header">
      <h4>Espectrograma</h4>
    </div>
    <div class="card-body">
      {% if spectrogram_plot %} {{ spectrogram_plot|safe }}
      <div class="mt-3 alert alert-secondary">
        <small>
          <i class="fas fa-info-circle"></i>
          Cores representam a intensidade (dB) em cada banda de frequência ao
          longo do tempo
        </small>
      </div>
      {% else %}
      <div class="alert alert-warning">Espectrograma não disponível</div>
      {% endif %}
    </div>
  </div>
<div class="alert alert-info">
  <h5>Legenda dos Filtros:</h5>
  <ul class="list-unstyled">
    <li><span class="badge bg-primary">Azul</span> Sinal Original</li>
    <li><span class="badge bg-danger">Vermelho</span> High-pass (0.5Hz)</li>
    <li><span class="badge bg-success">Verde</span> Low-pass (40Hz)</li>
    <li><span class="badge bg-warning">Amarelo</span> Band-pass (1-30Hz)</li>
    <li><span class="badge bg-purple">Roxo</span> Notch (60Hz)</li>
  </ul>
</div>

<script>
  // Ajuste dinâmico do tamanho do gráfico
  window.addEventListener("resize", function () {
    Plotly.Plots.resize(document.getElementById("spectral-plot"));
  });
</script>
{% endblock %}
